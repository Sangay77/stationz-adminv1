<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/web/thymeleaf/layout" lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <title th:text="${title} ? ${title + ' - ' + SITE_NAME} : 'Admin Panel'">Admin Panel</title>

  <link rel="icon" type="image/png" th:href="@{/images/favicon.png}" />

  <!-- Bootstrap 5 CSS -->
  <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.2/css/bootstrap.min.css}" />
  <!-- FontAwesome -->
  <link rel="stylesheet" th:href="@{/fontawesome/all.css}" />
  <!-- Custom CSS -->
  <link rel="stylesheet" th:href="@{/css/layout.css}" />

  <!-- ✅ Load jQuery FIRST -->
  <script src="/webjars/jquery/3.7.0/jquery.min.js"></script>

  <!-- ✅ Then richtext plugin -->
  <link rel="stylesheet" href="/richtext/richtext.min.css"/>
  <script src="/richtext/jquery.richtext.min.js"></script>

  <script th:src="@{/webjars/bootstrap/5.3.2/js/bootstrap.bundle.min.js}"></script>
</head>

<body class="d-flex flex-column min-vh-100">

<!-- Header -->
<div th:replace="~{/fragments/header}"></div>

<!-- Page Wrapper -->
<div class="d-flex" style="padding-top: 56px;">
  <nav id="sidebar" class="bg-dark text-white flex-shrink-0">
    <div th:replace="~{/fragments/main-sidebar}"></div>
  </nav>

  <main class="flex-grow-1 p-4 bg-light min-vh-100">
    <section class="content-header mb-3" layout:fragment="header"></section>
    <section class="content" layout:fragment="content"></section>
  </main>
</div>

<!-- Sidebar Toggle Script -->
<script th:src="@{/js/layout.js}"></script>
<div layout:fragment="scripts"></div>

</body>
</html>
